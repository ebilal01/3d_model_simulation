<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Simulation</title>
    <script src="https://cdn.jsdelivr.net/npm/babylonjs@5.0.0/babylon.min.js"></script>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
</head>
<body>
    <h1>3D Model Simulation</h1>
    <div id="model-container" style="width: 100%; height: 500px;"></div>

    <script>
        const socket = io();

        // Babylon.js Initialization
        const container = document.getElementById('model-container');
        const engine = new BABYLON.Engine(container, true);
        const scene = new BABYLON.Scene(engine);

        // Create a simple 3D cube
        const box = BABYLON.MeshBuilder.CreateBox("box", { size: 2 }, scene);
        const material = new BABYLON.StandardMaterial("boxMaterial", scene);
        material.wireframe = true;
        box.material = material;

        // Camera setup
        const camera = new BABYLON.ArcRotateCamera(
            "camera", 
            Math.PI / 2, 
            Math.PI / 2.5, 
            10, 
            BABYLON.Vector3.Zero(), 
            scene
        );
        camera.attachControl(container, true);

        // Lights
        const light = new BABYLON.HemisphericLight("light", BABYLON.Vector3.Up(), scene);
        
        // Run the engine to render the scene
        engine.runRenderLoop(() => {
            scene.render();
        });

        // Resize the engine when the window is resized
        window.addEventListener("resize", () => {
            engine.resize();
        });

        // Update model rotation based on live data
        socket.on('update_3d_model', (data) => {
            box.rotation.x = BABYLON.Tools.ToRadians(data.x_rotation);
            box.rotation.y = BABYLON.Tools.ToRadians(data.y_rotation);
            box.rotation.z = BABYLON.Tools.ToRadians(data.z_rotation);
        });
    </script>
</body>
</html>












